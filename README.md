# Multibank

## О проекте
Мультибанк-приложение, созданное на хакатоне [VTB API hackaton 2025](apply-apihack.vtb.ru). Интегрирует различные банки в один сервис с помощью API, предоставленных Банком ВТБ. Данные API имеют некоторые упрощения, однако создавались для соответствия требованиям Банка России к финансовым сервисам ([Требования 1](https://cbr.ru/Crosscut/LawActs/File/9907) и [Требования 2](https://cbr.ru/Crosscut/LawActs/File/9908)).

### Решаемые проблемы
- Разрозненные банковские API без единого интерфейса взаимодействия
- Сложность интеграции и управления OAuth-согласиями для разных банков
- Отсутствие унифицированного формата данных о счетах, продуктах и транзакциях 
- Недостаточная прозрачность и контроль за активными согласиями пользователей

### Решение
**Multibank** объединяет работу с различными банками в одном приложении, обеспечивая:
- централизованное управление **OAuth2-согласиями** (создание, отзыв, обновление); 
- получение информации о **счетах, продуктах и транзакциях** из разных банков через единый API;
- отображение данных в удобном интерфейсе;  

## Функциональность

- **Управление пользователями**
    - Регистрация и авторизация с JWT
    - Роли пользователей (обычный / администратор)

- **Интеграция с банками**
    - Список доступных банков
    - Подключение банка по OAuth2 (создание согласия)
    - Автоматическое продление (в фоновом режиме) или отзыв согласия (TODO)

- **Счета и транзакции**
    - Получение списка счетов и балансов
    - Просмотр истории транзакций (TODO)
    - Единый формат отображения для разных банков

- **Продукты**
    - Отображение банковских продуктов (депозиты, кредиты, карты)
    - Монетизация: выделение рекомендуемых продуктов

- **Администрирование (TODO)**
    - Управление банками, пользователями и доступами
    - Проверка статуса интеграций и логов API

## Технологический стек
### Backend
- **Язык:** Go 1.25
- **Роутер запросов:** chi router
- **База данных:** SQLite (modernc.org/sqlite)
- **Авторизация:** JWT
- **API-документация:** Swagger (swaggo/swag)
- **Архитектура:** многослойная (`domain / service / storage / http / dto`)
- **Логирование:** `slog`
- **Контейнеризация:** Docker + Makefile для сборки и запуска

### Frontend
- **Основа:** React 19, TypeScript
- **Сборка:** Vite
- **UI:** Material UI (MUI), TailwindCSS
- **Управление запросами:** TanStack Query, Axios
- **Роутер запросов:** TanStack Router
- **Формы:** React Hook Form + Zod
- **Менеджер состояний** Zustand

## Развертывание

### Сборка и запуск через Makefile
#### Основные таргеты:
```bash
make build-backend     # сборка образа backend
make build-frontend    # сборка образа frontend
make run-all           # запуск frontend и backend
make stop-all          # остановить и удалить все контейнеры
```

### Первый запуск
После успешной сборки и запуска контейнеров будет создана БД sqlite по этому пути: `multibank\backend\storage\multibank.db`.
В ней в таблице `banks` нужно в поле `password` у каждого банка указать пароль для доступа к API банков (это выданный организаторами `client_secret`).
Далее бекенд самостоятельно авторизуется в API банков, что можно будет увидеть в логах, интерфейсе бекенда или по эндпоинту `/banks` в `localhost:8080/swagger/`.